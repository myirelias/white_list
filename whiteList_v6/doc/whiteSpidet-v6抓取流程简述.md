# whiteSpidet-v6抓取流程简述

> 节点名称

- 【0】启动脚本
- 【1】list_spider：列表爬虫
- 【2】news_spider：新闻爬虫
- 【3】redis_list：列表任务队列
- 【4】redis_news：新闻任务队列
- 【5】新增list/news：新增任务
- 【6】数据存储

> 步骤简述

1. 【0】启动脚本开始执行，循环监听【3】、【4】两个redis任务队列，查看是否都存在任务，若两个redis任务队列均不为空，则执行第2步。若两个队列均为空，则执行第3步
2. 启动【1】【2】两个类型爬虫，【1】列表爬虫监听【3】列表任务队列，【2】新闻爬虫监听【4】新闻任务队列，执行第4步
3. 当【3】【4】redis任务队列均无任务时，清空bloom_list列表布隆过滤器，记录此次抓取，将起始url任务发布到redis_list列表任务队列中，执行第2步
4. 当redis任务队列【3】【4】有任务时，会被各自监听的爬虫取走其中的任务，得到任务的【1】【2】爬虫将会对各自的任务进行爬取，并解析页面中对应的数据，【1】列表爬虫执行第5步，【2】新闻爬虫执行第6步
5. 【1】列表爬虫只解析页面中的所有链接，返回新的列表任务和新闻任务，并将两类链接分别进行过滤(bloom_list/bloom_news)，执行第7步
6. 【2】新闻爬虫只解析页面中的新闻内容，将结果交由【6】数据存储模块进行存储，然后循环持续监听【4】redis任务队列
7. 过滤后的两类任务分别发布到对应的【3】【4】redis任务队列中，然后循环持续监听【3】redis任务队列
